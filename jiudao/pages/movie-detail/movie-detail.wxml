<wxs src='../../utils/filter.wxs' module='tools'/>
<view class='container'>
  <image class='head-img' src='{{movie.movieImg}}' data-src='{{movie.movieImg}}' catchtap='viewMoviePostImg' mode='aspectFill' />
  <view class='head-img-hover'>
    <text class='main-title'>{{movie.title}}</text>
    <text class='sub-title'>{{movie.countries+'·'+movie.year}}</text>
    <view class=' like '>
      <text class='highlight-font '>{{movie.wishCount}}</text>
      <text class='plain-font'>人喜欢</text>
      <text class='highlight-font '>{{movie.commentsCount}}</text>
      <text class='plain-font'>条评论</text>
    </view>
  </view>
  <image src='{{movie.movieImg}} ' class='movie-img' data-src='{{movie.movieImg}}' catchtap='viewMoviePostImg'/>
  <view class='summary'>
    <view class='original-title'>{{movie.originalTitle}}</view>
    <view class="flex-row">
      <text class="mark">评分</text>
      <v-stars stars='{{movie.stars}}' score='{{movie.score}}'/>
    </view>
    <view class="flex-row">
      <text class="mark">导演</text>
      <text>{{movie.director}}</text>
    </view>
    <view class="flex-row">
      <text class="mark">影人</text>
      <text>{{movie.casts}}</text>
    </view>
    <view class="flex-row">
      <text class="mark">类型</text>
      <text>{{movie.genres}}</text>
    </view>
  </view>
  <view class='synopsis'>
    <text class='synopsis-font'>剧情简介</text>
    <text class='synopsis-content' decode='true'>{{tools.format(movie.summary)}}</text>
  </view>
  <view class='cast'>
    <text class='cast-font'>影人</text>
    <scroll-view class='cast-imgs' scroll-x>
      <block wx:for='{{movie.castsInfo}}' wx:for-item='item' wx:key='{{index}}'>
        <view class='cast-container'>
          <image class='cast-img' src='{{item.img}}' />
          <text class='cast-name'>{{item.name}}</text>
        </view>
      </block>
    </scroll-view>
  </view>
</view>

<view class='post-container' wx:if='{{!posting}}'>
  <view class='post-fake' bind:tap="onFakePost">
    <image src='/images/book/write.png' />
    <text class='input'>留下你的短评吧～</text>
  </view>
  <view class='button'>
    <v-like isLike='{{likeStatus}}' count='{{likeCount}}' />
    <image src='/images/icon/fenxiang.png' />
  </view>
</view>
<view class='posting-container' wx:if='{{posting}}'>

  <view class='post-header'>
    <text >请输入你的评论</text>
    <text bind:tap='onFakePost'>取消</text>
  </view>
  <view class='comment-container' wx:if='{{comment}}'>
    <block wx:for='{{tools.limit(comment,3)}}' wx:key='{{index}}'>
      <v-tag  content='{{item.content}}' tag-class='{{highlight.highlight(index)}}' bind:tapping='onPost'>
        <text class='count' slot='after'>+1</text>
      </v-tag>
    </block>
  </view>
  <input class='post' focus='true' placeholder='短评最多12个字' placeholder-class='placeholder' bindconfirm='onPost' value='{{inputValue}}'/>
</view>
<v-mask wx:if='{{posting}}'/>